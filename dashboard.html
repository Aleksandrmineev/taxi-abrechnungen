<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Taxi Reports — Operator-Dashboard</title>
    <meta name="color-scheme" content="dark light" />

    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="./assets/favicon/apple-touch-icon.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="./assets/favicon/favicon-32x32.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="./assets/favicon/favicon-16x16.png"
    />
    <link rel="manifest" href="./assets/favicon/site.webmanifest" />

    <link
      href="https://fonts.googleapis.com/css2?family=Marcellus+SC&display=swap"
      rel="stylesheet"
    />

    <!-- Глобальные стили проекта -->
    <link rel="stylesheet" href="assets/css/theme.css" />
    <link rel="stylesheet" href="assets/css/style.css" />
  </head>
  <body>
    <!-- Header -->
    <header class="header">
      <a class="brand" href="index.html" aria-label="MurtalTaxi Start">
        <div class="brand__logo" aria-hidden="true">
          <img src="./assets/img/logo1.png" alt="Logo Murtal Taxi" />
        </div>
        <span class="brand__title">Murtal&nbsp;TAXI</span>
      </a>

      <div class="spacer"></div>

      <a
        class="pill"
        href="tel:+436601018101"
        aria-label="Jetzt anrufen: +43 660 1018101"
      >
        <svg viewBox="0 0 24 24" role="img">
          <path
            d="M6.62 10.79a15.05 15.05 0 006.59 6.59l2.2-2.2a1 1 0 011.01-.24 11.36 11.36 0 003.56.57 1 1 0 011 1v3.61a1 1 0 01-1 1A17.02 17.02 0 013 5a1 1 0 011-1h3.61a1 1 0 011 1c0 1.22.2 2.41.57 3.56a1 1 0 01-.24 1.01l-2.32 2.22z"
          />
        </svg>
        <strong>+43&nbsp;660&nbsp;1018101</strong>
      </a>

      <button
        id="theme-toggle"
        class="pill"
        type="button"
        aria-label="Thema umschalten"
      >
        <svg id="theme-icon" viewBox="0 0 24 24" role="img"></svg>
        <span class="sr-only">Thema wechseln</span>
      </button>
    </header>

    <!-- Dashboard -->
    <div class="wrap">
      <header>
        <div class="brand">
          <svg
            width="28"
            height="28"
            viewBox="0 0 24 24"
            fill="none"
            aria-hidden="true"
          >
            <path
              d="M3 13h18l-2 7H5l-2-7Zm2-2 3-6h6l3 6"
              stroke="#7fa7ff"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
          </svg>
          <h1>Dashboard — Disponent</h1>
        </div>
        <div class="row" style="gap: 10px">
          <input
            id="admin_secret"
            type="password"
            placeholder="ADMIN_SECRET (optional)"
          />
          <button class="btn" id="saveAdmin">Speichern</button>
        </div>
      </header>

      <section class="card">
        <div
          class="row"
          style="justify-content: space-between; gap: 10px; flex-wrap: wrap"
        >
          <div class="row" style="gap: 8px">
            <button class="btn" id="loadDashboard">Übersicht laden</button>
            <input
              id="search"
              placeholder="Suche nach Fahrer/ID..."
              style="min-width: 220px"
            />
          </div>
          <div class="row small" style="gap: 14px">
            <span class="pill">Fahrer gesamt: <b id="countAll">0</b></span>
            <span class="pill">Summe abzugeben: <b id="sumAll">0.00 €</b></span>
          </div>
        </div>

        <div id="dashBox" style="margin-top: 12px; overflow: auto"></div>
      </section>

      <section class="card" id="driverPanel" style="display: none">
        <div class="grid">
          <div class="full">
            <h2 id="drvTitle" style="margin: 0 0 8px 0">Fahrer</h2>
            <div class="row" style="gap: 12px; flex-wrap: wrap">
              <span class="pill mono"
                >ID: <span id="drvId" style="margin-left: 6px"></span
              ></span>
              <span class="pill mono"
                >Name: <span id="drvName" style="margin-left: 6px"></span
              ></span>
              <span class="pill mono total"
                >Abzugeben (gesamt):
                <span id="drvDue" class="mono ok" style="margin-left: 6px"
                  >0.00 €</span
                ></span
              >
              <span class="pill mono"
                >Gesamt:
                <span id="drvAcc" class="mono" style="margin-left: 6px"
                  >0.00 €</span
                ></span
              >
              <span class="pill mono"
                >Abgegeben:
                <span id="drvRem" class="mono" style="margin-left: 6px"
                  >0.00 €</span
                ></span
              >
            </div>
          </div>

          <div class="full sep"></div>

          <div class="full">
            <div class="row" style="gap: 10px; flex-wrap: wrap">
              <button class="btn" id="btnShowDocs">
                Dokumente anzeigen (Fahrten, KT, Sonstiges)
              </button>
              <span class="hint"
                >Für die Dokumentliste ist ein Admin-Endpunkt erforderlich.
                Falls er fehlt, wird ein Hinweis angezeigt.</span
              >
            </div>
          </div>

          <div class="full" id="docsWrap" style="display: none">
            <h3 style="margin: 14px 0 8px 0">Dokumente für den Zeitraum</h3>

            <div class="grid">
              <div class="col6">
                <h4 style="margin: 6px 0">
                  Auf Rechnung (wird von Abgabe abgezogen)
                </h4>
                <div id="docInvoice"></div>
              </div>
              <div class="col6">
                <h4 style="margin: 6px 0">Krankentransport (Info)</h4>
                <div id="docKT"></div>
              </div>
              <div class="full">
                <h4 style="margin: 6px 0">Sonstige Einträge zur Übergabe</h4>
                <div id="docMisc"></div>
              </div>
            </div>
          </div>

          <div class="full" id="docsHint" style="display: none">
            <div class="bad">
              Dokumentenliste nicht verfügbar (kein Server-Endpunkt). Bitten Sie
              den Entwickler, <code>driver_reports_admin</code> hinzuzufügen
              (siehe Kommentar in <code>dashboard.js</code>).
            </div>
          </div>
        </div>
      </section>
    </div>

    <!-- Footer -->
    <footer>
      <div class="footer__dev">
        <a
          href="https://t.me/aamineev"
          target="_blank"
          rel="noopener"
          aria-label="Schreiben in Telegram @aamineev"
          class="footer__link"
        >
          <svg
            class="tg-icon"
            width="18"
            height="18"
            viewBox="0 0 24 24"
            aria-hidden="true"
          >
            <path
              d="M9.7 14.7l-.3 4.6c.4 0 .6-.2.8-.4l2-1.9 4.1 3c.7.4 1.2.2 1.4-.6l2.6-12.2c.2-.9-.3-1.3-1-1.1L4 10.3c-.8.2-.8.7-.1.9l4.3 1.3 10-6.3c.5-.3.9-.1.5.2l-9 8.3z"
              fill="currentColor"
            />
          </svg>
          Entwicklung
        </a>

        <a
          href="anleitung-qr.html"
          class="footer__link footer__help"
          aria-label="Öffnen der Hilfeseite"
        >
          <svg
            class="help-icon"
            width="18"
            height="18"
            viewBox="0 0 24 24"
            aria-hidden="true"
          >
            <path
              d="M12 2a10 10 0 1 0 10 10A10.011 10.011 0 0 0 12 2Zm.25 17a1.25 1.25 0 1 1 1.25-1.25A1.25 1.25 0 0 1 12.25 19ZM13.5 13a.75.75 0 0 1-.75.75h-1.5a.75.75 0 0 1-.75-.75v-.5a2.5 2.5 0 0 1 2.5-2.5 1.5 1.5 0 1 0-1.5-1.5.75.75 0 0 1-1.5 0 3 3 0 1 1 3.75 2.9Z"
              fill="currentColor"
            />
          </svg>
          Hilfe
        </a>

        <button
          id="theme-toggle-footer"
          class="footer__theme"
          aria-label="Thema umschalten"
        >
          <svg
            id="theme-icon-footer"
            width="18"
            height="18"
            viewBox="0 0 24 24"
          ></svg>
        </button>
      </div>
    </footer>

    <script src="assets/js/api.js"></script>
    <script src="assets/js/dashboard.js"></script>
  </body>
</html>
